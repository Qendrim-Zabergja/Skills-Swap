import{m as f,c as n,o as l,F as v,A as b,d as t,n as N,q as ke,z as ae,x as ie,p as G,y as _e,a as S,t as a,e as g,i as h,w as M,h as Ce,k as w,u as d,v as R,E as ue,G as de,S as V,W as L,f as ce}from"./app-RABvWGqE.js";import{_ as ge}from"./Modal-iMmTPtjx.js";import{_ as Se}from"./Navbar-Co8Gbpgx.js";const Me={class:"flex items-center"},Re=["onClick","onMouseover"],$e={__name:"RatingStars",props:{modelValue:{type:Number,required:!0,default:0}},emits:["update:modelValue"],setup(m,{emit:r}){const x=r,y=f(0),P=A=>{x("update:modelValue",A)};return(A,k)=>(l(),n("div",Me,[(l(),n(v,null,b(5,c=>t("svg",{key:c,onClick:U=>P(c),onMouseover:U=>y.value=c,onMouseleave:k[0]||(k[0]=U=>y.value=0),class:N(["w-5 h-5 cursor-pointer transition-colors",c<=(y.value||m.modelValue)?"text-yellow-400":"text-gray-300","hover:scale-110"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},k[1]||(k[1]=[t("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z","clip-rule":"evenodd"},null,-1)]),42,Re)),64))]))}},je={class:"min-h-screen bg-gray-50 flex flex-col","data-v-app":""},De={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ve={class:"flex gap-8"},Le={class:"w-80"},Pe={class:"text-center mb-6"},Ae={class:"relative w-24 h-24 mx-auto mb-4"},Ue={key:0,class:"w-full h-full rounded-full overflow-hidden"},Be=["src"],Ee={key:1,class:"w-full h-full bg-gray-200 rounded-full flex items-center justify-center text-gray-400 text-2xl"},Te={class:"text-xl font-medium mb-1"},ze={class:"text-sm text-gray-500 mb-4"},Ie={class:"space-y-4"},Fe={class:"flex items-center text-sm text-gray-600"},Ne={class:"flex items-center text-sm text-gray-600"},We={class:"flex items-center text-sm text-gray-600"},Ye={class:"mt-8"},Oe={class:"flex flex-wrap gap-2"},He={class:"mt-6"},Ke={class:"flex flex-wrap gap-2"},Ge={class:"flex-1"},Je={class:"border-b border-gray-200 mb-8"},Qe={class:"flex space-x-8"},Xe={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},Ze={key:0},qe={class:"space-y-4 w-full max-w-4xl"},et=["onClick"],tt={key:0,class:"flex flex-col text-xs mb-2"},st={class:"flex items-center space-x-4"},ot={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-400"},lt=["src"],nt={class:"text-sm font-medium text-gray-900"},rt={class:"text-sm text-gray-500"},at={class:"text-xs text-gray-400 mt-1"},it={class:"flex items-center space-x-4 ml-8"},ut=["onClick"],dt=["onClick"],ct=["onClick"],gt={class:"space-y-4 w-full max-w-4xl"},mt=["onClick"],ft=["onClick"],pt={class:"flex items-center space-x-4"},vt={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-400"},xt=["src"],yt={class:"text-sm font-medium text-gray-900"},ht={class:"text-sm text-gray-500"},bt={class:"text-xs text-gray-400 mt-1"},wt=["onClick"],kt={key:1},_t={class:"space-y-4 w-full",style:{"max-width":"90%"}},Ct=["onClick"],St={class:"flex items-center justify-between w-full mb-3"},Mt={class:"flex items-center space-x-4"},Rt={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden"},$t=["src","alt"],jt={key:1,class:"text-gray-400"},Dt={class:"text-sm font-medium text-gray-900"},Vt={class:"text-xs text-gray-400"},Lt={class:"text-sm text-gray-500 mb-3 pl-14"},Pt={class:"flex items-center pl-14"},At={class:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-blue-100 text-blue-700"},Ut={key:0,class:"p-8 text-center text-gray-500"},Bt={key:0,class:"p-4 border-t border-gray-200 text-center"},Et={class:"p-6"},Tt={class:"flex items-center space-x-4 mb-6"},zt={class:"w-16 h-16 rounded-full overflow-hidden bg-gray-100"},It=["src"],Ft={key:1,class:"w-full h-full flex items-center justify-center text-gray-400 text-xl"},Nt={class:"space-y-4"},Wt={class:"flex flex-wrap gap-2 mb-3"},Yt=["onClick"],Ot={class:"flex gap-2"},Ht=["value"],Kt={class:"flex flex-wrap gap-2 mb-3"},Gt=["onClick"],Jt={class:"flex gap-2"},Qt=["value"],Xt={class:"flex justify-end space-x-3 pt-6"},Zt={class:"bg-gray-100 py-3 text-xs text-gray-500 mt-auto"},qt={class:"container mx-auto px-4 flex justify-between items-center"},es={class:"flex space-x-4"},ts={class:"p-6"},ss={class:"text-lg font-medium mb-4"},os={key:0},ls={class:"mb-4"},ns={class:"mb-4"},rs={class:"flex justify-end space-x-3"},as=["disabled"],cs={__name:"Edit",props:{user:Object,teachingSkills:Array,learningSkills:Array,incomingRequests:Array,outgoingRequests:Array,initialConversations:{type:Array,default:()=>[]}},setup(m){var se,oe,le,ne,re;const r=m;console.log("lll",r.incomingRequests);const x=f("requests"),y=f(r.initialConversations||[]),P=f(1),A=f(1),k=f(!1),c=f(0),U=ke(()=>P.value<A.value),W=()=>{c.value=y.value.filter(o=>o.last_message&&!o.last_message.is_read&&o.last_message.user_id!==r.user.id).length,console.log("Unread messages:",c.value)};ae(()=>{if(W(),D(),window.Echo){console.log(`Setting up Echo listeners for user ID: ${r.user.id}`),window.Echo.private(`user.${r.user.id}`).listen("MessageSent",e=>{console.log("🔔 MessageSent event received on user channel:",e),e.message&&e.message.recipient_id===r.user.id&&e.message.user_id!==r.user.id&&(console.log("📩 I am the recipient - showing notification badge"),c.value+=1,console.log(`Unread messages count increased to: ${c.value}`),D())});const o=window.Echo.connector.pusher;o.subscribe("private-user."+r.user.id).bind("MessageSent",e=>{console.log("📨 Message event from Pusher subscription:",e),e.message&&e.message.recipient_id===r.user.id&&e.message.user_id!==r.user.id&&(console.log("📬 Incoming message detected - updating badge"),c.value+=1,c.value=parseInt(c.value),console.log(`Badge count updated to: ${c.value}`))}),o.subscribe("private-chat."+r.user.id).bind("MessageSent",e=>{console.log("💬 Message received on chat channel:",e),e.message&&e.message.recipient_id===r.user.id&&e.message.user_id!==r.user.id&&(console.log("🔴 Updating badge from chat channel"),c.value+=1,c.value=parseInt(c.value))}),o.connection.bind("connected",()=>{console.log("✅ Pusher connected successfully")}),o.connection.bind("error",e=>{console.error("❌ Pusher connection error:",e)})}});const B=f(!1),Y=f(!1),_=f(null),C=f(r.incomingRequests||[]),j=f(r.outgoingRequests||[]),E=f(""),T=f(""),z=f(""),I=f("");function J(o){return!o.ratings||!r.user?!1:o.ratings.some(e=>e.rater_id===r.user.id)}const u=ie({name:((se=r.user)==null?void 0:se.name)||"",email:((oe=r.user)==null?void 0:oe.email)||"",phone:((le=r.user)==null?void 0:le.phone)||"",location:((ne=r.user)==null?void 0:ne.location)||"",title:((re=r.user)==null?void 0:re.title)||"",teachingSkills:r.teachingSkills||[],learningSkills:r.learningSkills||[]}),p=ie({score:0,comment:""}),Q=["Design","Development","Music","Language","Business","Lifestyle","Photography","Education"],X=async(o,e)=>{try{const s=await G.delete(route("api.swap-requests.destroy",o));s.data.success?e==="incoming"?C.value=C.value.filter(i=>i.id!==o):e==="outgoing"&&(j.value=j.value.filter(i=>i.id!==o)):alert(s.data.message||"Failed to remove request.")}catch{alert("Failed to remove request.")}},D=async(o=1)=>{try{k.value=!0;const e=await G.get(route("messages.conversations"),{params:{page:o}});o===1?y.value=e.data||[]:y.value=[...y.value,...e.data||[]],P.value=o,A.value=Math.ceil(e.data.length/10),W()}catch(e){console.error("Error fetching conversations:",e),o===1&&(y.value=[])}finally{k.value=!1}},me=()=>{U.value&&!k.value&&D(P.value+1)},fe=o=>{var e;(e=o==null?void 0:o.other_user)!=null&&e.id?(o.last_message&&!o.last_message.is_read&&o.last_message.user_id!==r.user.id&&(o.last_message.is_read=!0,W(),G.post(route("messages.mark-as-read",o.id)).catch(s=>console.error("Error marking conversation as read:",s))),L.visit(route("messages.show",o.other_user.id))):alert("User information is missing for this conversation.")},O=o=>{const e=new Date(o),s=new Date;if(e.toDateString()===s.toDateString())return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});const i=new Date(s);return i.setDate(i.getDate()-1),e.toDateString()===i.toDateString()?"Yesterday":e.getFullYear()===s.getFullYear()?e.toLocaleDateString([],{month:"short",day:"numeric"}):e.toLocaleDateString()},H=o=>o?o.split(" ").map(e=>e[0]).join("").toUpperCase():"",Z=()=>{E.value.trim()&&T.value&&(u.teachingSkills.push({name:E.value.trim(),category:T.value}),E.value="",T.value="")},pe=o=>{u.teachingSkills=u.teachingSkills.filter(e=>e.name!==o.name)},q=()=>{z.value.trim()&&I.value&&(u.learningSkills.push({name:z.value.trim(),category:I.value}),z.value="",I.value="")},ve=o=>{u.learningSkills=u.learningSkills.filter(e=>e.name!==o.name)},xe=o=>{L.post(route("requests.accept",{swapRequest:o}),{},{preserveScroll:!0,onSuccess:()=>{C.value=C.value.filter(e=>e.id!==o),D()}})},ye=o=>{L.post(route("requests.decline",{swapRequest:o}),{},{preserveScroll:!0,onSuccess:()=>{C.value=C.value.filter(e=>e.id!==o)}})},he=o=>{L.post(route("requests.cancel",{swapRequest:o}),{},{preserveScroll:!0,onSuccess:()=>{j.value=j.value.filter(e=>e.id!==o)}})},be=()=>{u.patch(route("profile.update"),{onSuccess:()=>{B.value=!1,r.user.name=u.name,r.user.email=u.email,r.user.phone=u.phone,r.user.location=u.location,r.user.title=u.title}})},ee=o=>{_.value=o,p.score=0,p.comment="",Y.value=!0},K=()=>{Y.value=!1,_.value=null,p.reset()},we=()=>{if(!p.score||p.processing||!_.value)return;const o=_.value.id;o&&p.post(`/requests/${o}/rate`,{preserveScroll:!0,onSuccess:()=>{var s,i,F;let e=C.value.find($=>$.id===o);e||(e=j.value.find($=>$.id===o)),e&&(e.rated=!0,e.ratings=e.ratings||[],e.ratings.push({id:Date.now(),rater_id:r.user.id,rated_user_id:r.user.id===((s=e.user)==null?void 0:s.id)?(i=e.recipient)==null?void 0:i.id:(F=e.user)==null?void 0:F.id,score:p.score,comment:p.comment})),K()}})},te=o=>{const e=o.target.files[0];if(!e)return;const s=new FormData;s.append("photo",e),L.post(route("profile.photo.update"),s,{preserveScroll:!0,onSuccess:()=>{L.reload()}})};return _e(x,o=>{o==="messages"&&D()}),ae(()=>{x.value==="messages"&&y.value.length===0&&D()}),(o,e)=>(l(),n(v,null,[t("div",je,[S(Se),t("div",De,[t("div",Ve,[t("div",Le,[t("div",Pe,[t("div",Ae,[m.user.profile_photo_url?(l(),n("div",Ue,[t("img",{src:m.user.profile_photo_url,alt:"Profile photo",class:"w-full h-full object-cover"},null,8,Be)])):(l(),n("div",Ee,a(H(m.user.name)),1)),t("button",{onClick:e[0]||(e[0]=s=>o.$refs.photoInput.click()),class:"absolute bottom-0 right-0 bg-gray-900 text-white p-1.5 rounded-full hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"},e[18]||(e[18]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),t("input",{ref:"photoInput",type:"file",class:"hidden",accept:"image/*",onChange:te},null,544)]),t("h2",Te,a(m.user.name),1),t("p",ze,a(m.user.title||"Professional Title"),1),t("button",{onClick:e[1]||(e[1]=s=>B.value=!0),class:"w-full bg-gray-900 text-white py-2 px-4 rounded text-sm font-medium hover:bg-gray-800"}," Edit Profile ")]),t("div",Ie,[t("div",Fe,[e[19]||(e[19]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),g(" "+a(m.user.location||"Location not set"),1)]),t("div",Ne,[e[20]||(e[20]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),g(" "+a(m.user.email),1)]),t("div",We,[e[21]||(e[21]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),g(" "+a(m.user.phone||"Phone not set"),1)])]),t("div",Ye,[e[22]||(e[22]=t("h3",{class:"font-medium mb-3"},"Skills I Can Teach",-1)),t("div",Oe,[(l(!0),n(v,null,b(m.teachingSkills,s=>(l(),n("span",{key:s.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},a(s.name),1))),128))])]),t("div",He,[e[23]||(e[23]=t("h3",{class:"font-medium mb-3"},"Skills I Want to Learn",-1)),t("div",Ke,[(l(!0),n(v,null,b(m.learningSkills,s=>(l(),n("span",{key:s.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},a(s.name),1))),128))])])]),t("div",Ge,[t("div",Je,[t("div",Qe,[t("button",{onClick:e[2]||(e[2]=s=>x.value="requests"),class:N([{"border-b-2 border-gray-900 text-gray-900":x.value==="requests","border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":x.value!=="requests"},"py-4 px-1 text-sm font-medium"])}," Swap Requests ",2),t("button",{onClick:e[3]||(e[3]=s=>x.value="messages"),class:N([{"border-b-2 border-gray-900 text-gray-900":x.value==="messages","border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":x.value!=="messages"},"py-4 px-1 text-sm font-medium relative"])},[e[24]||(e[24]=g(" Messages ")),c.value>0?(l(),n("span",Xe,a(c.value),1)):h("",!0)],2)])]),x.value==="requests"?(l(),n("div",Ze,[t("div",qe,[(l(!0),n(v,null,b(C.value,s=>(l(),n("div",{key:s.id,class:"group relative flex items-center justify-between p-6 bg-white border rounded-lg w-full"},[t("button",{onClick:i=>X(s.id,"incoming"),class:"absolute top-2 right-2 p-1 text-gray-400 bg-gray-100 rounded-full shadow-sm z-50 hover:bg-red-500 hover:text-white transition",title:"Remove"},e[25]||(e[25]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,et),s.ratings&&s.ratings.length>0?(l(),n("div",tt,[(l(!0),n(v,null,b(s.ratings,i=>(l(),n("div",{key:i.id,class:"flex items-center gap-2"}))),128))])):h("",!0),t("div",st,[t("div",ot,[t("img",{src:s.user.profile_photo_url,alt:""},null,8,lt)]),t("div",null,[t("div",nt,a(s.user.name),1),t("div",rt,[g(" Wants to learn: "+a(s.skill_wanted)+" ",1),e[26]||(e[26]=t("br",null,null,-1)),g(" Offers to teach: "+a(s.skill_offered),1)]),t("div",at," Received "+a(O(s.created_at)),1)])]),t("div",it,[s.status==="Pending"?(l(),n(v,{key:0},[t("button",{onClick:i=>xe(s.id),class:"px-3 py-1 text-sm bg-green-100 text-green-700 rounded-md hover:bg-green-200"}," Accept ",8,ut),t("button",{onClick:i=>ye(s.id),class:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded-md hover:bg-red-200"}," Decline ",8,dt)],64)):s.status==="Accepted"?(l(),n(v,{key:1},[s.user&&s.user.id?(l(),ce(d(V),{key:0,href:o.route("messages.show",s.user.id),class:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 mr-4"},{default:M(()=>e[27]||(e[27]=[g(" Message ")])),_:2},1032,["href"])):h("",!0),J(s)?h("",!0):(l(),n("button",{key:1,onClick:i=>ee(s),class:"px-3 py-1 text-sm bg-yellow-100 text-yellow-700 rounded-md hover:bg-yellow-200"}," Rate ",8,ct)),e[28]||(e[28]=t("div",{class:"text-sm text-green-600"},"Accepted",-1))],64)):(l(),n("div",{key:2,class:N(["text-sm",{"text-red-600":s.status==="Declined","text-gray-600":s.status==="Cancelled"}])},a(s.status),3))])]))),128))]),e[33]||(e[33]=t("h3",{class:"font-medium text-lg mt-8 mb-4"},"Outgoing Requests",-1)),t("div",gt,[(l(!0),n(v,null,b(j.value,s=>(l(),n("div",{key:s.id,class:"group relative p-6 bg-white border rounded-lg w-full"},[t("button",{onClick:i=>X(s.id,"outgoing"),class:"absolute top-2 right-2 p-1 text-gray-400 bg-gray-100 rounded-full shadow-sm z-50 hover:bg-red-500 hover:text-white transition",title:"Remove"},e[29]||(e[29]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,mt),s.status==="Pending"?(l(),n("button",{key:0,onClick:i=>he(s.id),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1 text-gray-700 bg-gray-100 rounded-full shadow-sm z-50 hover:bg-gray-200"},e[30]||(e[30]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ft)):h("",!0),t("div",pt,[t("div",vt,[t("img",{src:s.recipient.profile_photo_url,alt:"",class:"w-full h-full object-cover rounded-full"},null,8,xt)]),t("div",null,[t("div",yt,a(s.recipient.name),1),t("div",ht,[g(" You want to learn: "+a(s.skill_wanted)+" ",1),e[31]||(e[31]=t("br",null,null,-1)),g(" You offer to teach: "+a(s.skill_offered),1)]),t("div",bt," Sent "+a(O(s.created_at)),1)])]),t("div",{class:N(["mt-2 text-sm",{"text-yellow-600":s.status==="Pending","text-green-600":s.status==="Accepted","text-red-600":s.status==="Declined","text-gray-600":s.status==="Cancelled"}])},[g(a(s.status)+" ",1),s.status==="Accepted"?(l(),ce(d(V),{key:0,href:o.route("messages.show",s.recipient.id),class:"ml-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200"},{default:M(()=>e[32]||(e[32]=[g(" Message ")])),_:2},1032,["href"])):h("",!0),s.status==="Accepted"&&!J(s)?(l(),n("button",{key:1,onClick:i=>ee(s),class:"ml-2 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-md hover:bg-yellow-200"}," Rate ",8,wt)):h("",!0)],2)]))),128))])])):h("",!0),x.value==="messages"?(l(),n("div",kt,[t("div",_t,[(l(!0),n(v,null,b(y.value,s=>(l(),n("div",{key:s.id,class:"group relative flex flex-col p-6 bg-white border rounded-lg w-full cursor-pointer",style:{"min-width":"540px",width:"90%"},onClick:i=>fe(s)},[t("div",St,[t("div",Mt,[t("div",Rt,[s.other_user.profile_photo_url?(l(),n("img",{key:0,src:s.other_user.profile_photo_url,alt:s.other_user.name,class:"w-full h-full object-cover"},null,8,$t)):(l(),n("span",jt,a(H(s.other_user.name)),1))]),t("div",null,[t("div",Dt,a(s.other_user.name),1),t("div",Vt,a(O(s.last_message.created_at)),1)])])]),t("div",Lt,a(s.last_message.content),1),t("div",Pt,[t("span",At,a(s.skill_offered)+" ↔ "+a(s.skill_wanted),1)])],8,Ct))),128)),y.value.length===0?(l(),n("div",Ut," No messages yet. Start a conversation by accepting a swap request. ")):h("",!0)]),U.value?(l(),n("div",Bt,[t("button",{onClick:me,class:"text-sm font-medium text-gray-900 hover:text-gray-700 focus:outline-none"}," Load More Messages ")])):h("",!0)])):h("",!0)])]),S(ge,{show:B.value,onClose:e[15]||(e[15]=s=>B.value=!1),"max-width":"2xl"},{default:M(()=>[t("div",Et,[e[46]||(e[46]=t("h2",{class:"text-lg font-medium mb-4"},"Edit Profile",-1)),t("form",{onSubmit:Ce(be,["prevent"]),class:"space-y-6"},[t("div",Tt,[t("div",zt,[m.user.profile_photo_url?(l(),n("img",{key:0,src:m.user.profile_photo_url,alt:"Profile photo",class:"w-full h-full object-cover"},null,8,It)):(l(),n("div",Ft,a(H(m.user.name)),1))]),t("div",null,[t("button",{type:"button",onClick:e[4]||(e[4]=s=>o.$refs.modalPhotoInput.click()),class:"bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Change Photo "),t("input",{ref:"modalPhotoInput",type:"file",class:"hidden",accept:"image/*",onChange:te},null,544)])]),t("div",Nt,[t("div",null,[e[34]||(e[34]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),w(t("input",{id:"name","onUpdate:modelValue":e[5]||(e[5]=s=>d(u).name=s),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-500 focus:border-gray-500 sm:text-sm"},null,512),[[R,d(u).name]])]),t("div",null,[e[35]||(e[35]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),w(t("input",{id:"email","onUpdate:modelValue":e[6]||(e[6]=s=>d(u).email=s),type:"email",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-500 focus:border-gray-500 sm:text-sm"},null,512),[[R,d(u).email]])]),t("div",null,[e[36]||(e[36]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Phone",-1)),w(t("input",{id:"phone","onUpdate:modelValue":e[7]||(e[7]=s=>d(u).phone=s),type:"tel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-500 focus:border-gray-500 sm:text-sm"},null,512),[[R,d(u).phone]])]),t("div",null,[e[37]||(e[37]=t("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Location",-1)),w(t("input",{id:"location","onUpdate:modelValue":e[8]||(e[8]=s=>d(u).location=s),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-500 focus:border-gray-500 sm:text-sm"},null,512),[[R,d(u).location]])]),t("div",null,[e[38]||(e[38]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Professional Title",-1)),w(t("input",{id:"title","onUpdate:modelValue":e[9]||(e[9]=s=>d(u).title=s),type:"text",placeholder:"e.g. Full Stack Developer, UI Designer, Music Teacher",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-500 focus:border-gray-500 sm:text-sm"},null,512),[[R,d(u).title]])])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Skills I Can Teach",-1)),t("div",Wt,[(l(!0),n(v,null,b(d(u).teachingSkills,s=>(l(),n("span",{key:s.name,class:"inline-flex items-center gap-1 px-2.5 py-1.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800"},[g(a(s.name)+" ",1),t("button",{onClick:i=>pe(s),type:"button",class:"text-gray-500 hover:text-gray-700"},e[39]||(e[39]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Yt)]))),128))]),t("div",Ot,[w(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>E.value=s),type:"text",placeholder:"Add a skill you can teach...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-gray-900",onKeyup:ue(Z,["enter"])},null,544),[[R,E.value]]),w(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>T.value=s),class:"w-40 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-gray-900"},[e[40]||(e[40]=t("option",{value:""},"Category",-1)),(l(),n(v,null,b(Q,s=>t("option",{key:s,value:s},a(s),9,Ht)),64))],512),[[de,T.value]]),t("button",{onClick:Z,type:"button",class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"}," Add ")])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Skills I Want to Learn",-1)),t("div",Kt,[(l(!0),n(v,null,b(d(u).learningSkills,s=>(l(),n("span",{key:s.name,class:"inline-flex items-center gap-1 px-2.5 py-1.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800"},[g(a(s.name)+" ",1),t("button",{onClick:i=>ve(s),type:"button",class:"text-gray-500 hover:text-gray-700"},e[42]||(e[42]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Gt)]))),128))]),t("div",Jt,[w(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>z.value=s),type:"text",placeholder:"Add a skill you want to learn...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-gray-900",onKeyup:ue(q,["enter"])},null,544),[[R,z.value]]),w(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>I.value=s),class:"w-40 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-gray-900 focus:border-gray-900"},[e[43]||(e[43]=t("option",{value:""},"Category",-1)),(l(),n(v,null,b(Q,s=>t("option",{key:s,value:s},a(s),9,Qt)),64))],512),[[de,I.value]]),t("button",{onClick:q,type:"button",class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"}," Add ")])]),t("div",Xt,[t("button",{type:"button",onClick:e[14]||(e[14]=s=>B.value=!1),class:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"}," Cancel "),e[45]||(e[45]=t("button",{type:"submit",class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"}," Save Changes ",-1))])],32)])]),_:1},8,["show"])]),t("footer",Zt,[t("div",qt,[e[51]||(e[51]=t("div",null," 2025 SkillSwap. All rights reserved.",-1)),t("div",es,[S(d(V),{href:o.route("about"),class:"hover:underline"},{default:M(()=>e[47]||(e[47]=[g("About")])),_:1},8,["href"]),S(d(V),{href:o.route("terms"),class:"hover:underline"},{default:M(()=>e[48]||(e[48]=[g("Terms")])),_:1},8,["href"]),S(d(V),{href:o.route("privacy"),class:"hover:underline"},{default:M(()=>e[49]||(e[49]=[g("Privacy")])),_:1},8,["href"]),S(d(V),{href:o.route("contact"),class:"hover:underline"},{default:M(()=>e[50]||(e[50]=[g("Contact")])),_:1},8,["href"])])])])]),S(ge,{show:Y.value,onClose:K},{default:M(()=>{var s,i,F;return[t("div",ts,[t("h2",ss,[e[52]||(e[52]=g(" Rate your experience with ")),_.value?(l(),n("span",os,a(r.user.id===((s=_.value.user)==null?void 0:s.id)?(i=_.value.recipient)==null?void 0:i.name:(F=_.value.user)==null?void 0:F.name),1)):h("",!0)]),t("div",ls,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rating",-1)),S($e,{modelValue:d(p).score,"onUpdate:modelValue":e[16]||(e[16]=$=>d(p).score=$),readonly:!1,"show-value":!1},null,8,["modelValue"])]),t("div",ns,[e[54]||(e[54]=t("label",{for:"comment",class:"block text-sm font-medium text-gray-700 mb-2"},"Comment (Optional)",-1)),w(t("textarea",{"onUpdate:modelValue":e[17]||(e[17]=$=>d(p).comment=$),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-gray-900 focus:ring focus:ring-gray-900 focus:ring-opacity-50",placeholder:"Share your experience..."},null,512),[[R,d(p).comment]])]),t("div",rs,[t("button",{onClick:K,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),t("button",{onClick:we,disabled:!d(p).score||d(p).processing,class:"px-4 py-2 text-sm font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed"}," Submit Rating ",8,as)])])]}),_:1},8,["show"])],64))}};export{cs as default};
