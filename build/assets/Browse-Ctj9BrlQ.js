import{m as c,H as ee,y as te,W as M,q as F,z as se,c as n,o as a,d as s,a as k,F as i,A as u,k as E,i as j,v as le,w as T,e as w,u as U,S as $,l as z,t as r,n as A}from"./app-RABvWGqE.js";import{_ as oe}from"./Navbar-Co8Gbpgx.js";import{_ as ne}from"./SkillExchangeModal-CGpdpZaa.js";import"./Modal-iMmTPtjx.js";const ae={class:"min-h-screen bg-gray-50"},re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ie={class:"flex gap-6"},ue={class:"w-1/4 bg-white rounded-lg border p-4 h-fit sticky top-4"},de={class:"mb-4"},ce={class:"space-y-2"},ge=["value"],ve={class:"mb-4"},fe={class:"space-y-2"},pe=["value"],me={class:"flex items-center"},he={class:"flex-1"},xe={class:"mb-6"},ye={class:"relative"},ke={class:"relative w-full"},_e={key:0,class:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto"},be=["onMousedown"],we={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ce={class:"flex items-center space-x-4"},Se={class:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-gray-500"},Le={key:0},Me=["src"],je={class:"flex items-center gap-2"},Te={class:"font-medium"},Ue={class:"flex items-center gap-1"},$e={class:"text-sm"},Be={key:0,class:"text-xs text-gray-400"},Fe={class:"text-sm text-gray-500"},Ee={class:"mt-4"},Pe={class:"flex items-center justify-between"},De={class:"flex flex-wrap gap-2 relative"},Oe={class:"relative inline-block"},Re=["onClick"],Ve={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 py-1"},ze={class:"flex flex-wrap gap-2 mt-2"},Ae={class:"mt-4"},We={class:"flex items-center justify-between"},qe={class:"flex flex-wrap gap-2 relative"},Ne={class:"relative inline-block"},He=["onClick"],Ie={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 py-1"},Ge={class:"flex flex-wrap gap-2 mt-2"},Je={class:"mt-auto pt-4 border-t flex justify-between items-center"},Ke={class:"text-sm text-gray-500"},Qe=["onClick"],Xe={class:"mt-6 flex justify-center gap-2"},Ye=["disabled"],Ze=["onClick"],et=["disabled"],tt={class:"bg-gray-100 py-3 text-xs text-gray-500 mt-10"},st={class:"container mx-auto px-4 flex justify-between items-center"},lt={class:"flex space-x-4"},P=10,it={__name:"Browse",props:{users:Array,auth:Object},setup(D){const C=D;console.log(C.users);const B=c(!1),O=c(null),W=["Design","Development","Music","Language","Business","Lifestyle","Photography","Education"],d=c(route().params.search||""),v=c(route().params.category?[route().params.category]:[]),_=c(null),y=c(!1),S=c([]),b=c([]),f=c(1),L=c({lookingForMySkills:!1,offeringSkillsIWant:!1,perfectMatchesOnly:!1}),h=c({}),x=c({}),q=ee();te(()=>q.props.flash,l=>{l&&l.rated_user_id&&M.reload({preserveScroll:!0})},{deep:!0});const N=()=>{v.value=[],b.value=[],L.value={lookingForMySkills:!1,offeringSkillsIWant:!1,perfectMatchesOnly:!1},d.value="",f.value=1,M.get(route("skills.browse"),{},{preserveState:!0,preserveScroll:!0,replace:!0})},H=()=>{if(_.value&&clearTimeout(_.value),y.value=d.value.length>0,!y.value){S.value=[];return}const l=d.value.toLowerCase(),e=new Set;C.users.forEach(t=>{t.name.toLowerCase().includes(l)&&e.add(t.name)}),C.users.forEach(t=>{var o,m;(o=t.teaching_skills)==null||o.forEach(g=>{g.name.toLowerCase().includes(l)&&e.add(g.name)}),(m=t.learning_skills)==null||m.forEach(g=>{g.name.toLowerCase().includes(l)&&e.add(`Learn: ${g.name}`)})}),S.value=Array.from(e).slice(0,5),_.value=setTimeout(()=>{f.value=1;const t={};d.value&&(t.search=d.value),v.value.length>0&&(t.category=v.value[0]),M.get(route("skills.browse"),t,{preserveState:!0,preserveScroll:!0,replace:!0})},300)},I=l=>{d.value=l.replace("Learn: ",""),y.value=!1,_.value&&clearTimeout(_.value),f.value=1;const e={};d.value&&(e.search=d.value),v.value.length>0&&(e.category=v.value[0]),M.get(route("skills.browse"),e,{preserveState:!0,preserveScroll:!0,replace:!0})},G=()=>{setTimeout(()=>{y.value=!1},200)},R=F(()=>{let l=C.users;if(d.value){const e=d.value.toLowerCase().trim();l=l.filter(t=>{var o,m;return!!(t.name.toLowerCase().includes(e)||(o=t.teaching_skills)!=null&&o.some(g=>g.name.toLowerCase().includes(e)||g.description&&g.description.toLowerCase().includes(e))||(m=t.learning_skills)!=null&&m.some(g=>g.name.toLowerCase().includes(e)))})}return v.value.length>0&&(l=l.filter(e=>{var o;const t=(o=e.teaching_skills[0])==null?void 0:o.category;return v.value.includes(t)||e.learning_skills.some(m=>v.value.includes(m.category))})),b.value.length>0&&(l=l.filter(e=>{const t=e.rating||e.average_rating||0;return b.value.some(o=>t>=o)})),L.value.lookingForMySkills&&(l=l.filter(e=>e.learning_skills.some(t=>currentUserTeachingSkills.includes(t.name)))),L.value.offeringSkillsIWant&&(l=l.filter(e=>e.teaching_skills.some(t=>currentUserLearningSkills.includes(t.name)))),L.value.perfectMatchesOnly&&(l=l.filter(e=>e.learning_skills.some(t=>currentUserTeachingSkills.includes(t.name))&&e.teaching_skills.some(t=>currentUserLearningSkills.includes(t.name)))),l}),J=F(()=>{const l=(f.value-1)*P,e=l+P;return R.value.slice(l,e)}),V=F(()=>Math.ceil(R.value.length/P)),K=l=>{console.log("Opening modal for user:",l),O.value=l,B.value=!0},Q=l=>l?l.split(" ").map(e=>e[0]).join("").toUpperCase():"",X=l=>l?new Date(l).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"",p=l=>[...new Set(l.map(e=>e.category))].filter(Boolean),Y=l=>{h.value[l]=!h.value[l],h.value[l]&&(x.value[l]=!1)},Z=l=>{x.value[l]=!x.value[l],x.value[l]&&(h.value[l]=!1)};return se(()=>{document.addEventListener("click",l=>{l.target.closest(".relative.inline-block")||(Object.keys(h.value).forEach(t=>{h.value[t]=!1}),Object.keys(x.value).forEach(t=>{x.value[t]=!1}))})}),(l,e)=>(a(),n(i,null,[s("div",ae,[k(oe),s("div",re,[e[17]||(e[17]=s("h1",{class:"text-2xl font-bold mb-2"},"Browse Skills",-1)),e[18]||(e[18]=s("p",{class:"text-gray-600 mb-8"},"Find skills to learn or people to teach",-1)),s("div",ie,[s("div",ue,[e[10]||(e[10]=s("h2",{class:"text-lg font-semibold mb-4"},"Filters",-1)),s("div",de,[e[7]||(e[7]=s("h3",{class:"font-medium mb-2"},"Skill Categories",-1)),s("div",ce,[(a(),n(i,null,u(W,t=>s("label",{key:t,class:"flex items-center"},[E(s("input",{type:"checkbox",value:t,"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),class:"mr-2 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,ge),[[z,v.value]]),w(" "+r(t),1)])),64))])]),s("div",ve,[e[9]||(e[9]=s("h3",{class:"font-medium mb-2"},"Rating",-1)),s("div",fe,[(a(),n(i,null,u([4,3,2,1],t=>s("label",{key:t,class:"flex items-center"},[E(s("input",{type:"checkbox",value:t,"onUpdate:modelValue":e[1]||(e[1]=o=>b.value=o),class:"mr-2 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,pe),[[z,b.value]]),s("div",me,[(a(),n(i,null,u(5,o=>s("span",{key:o,class:A(["text-sm",o<=t?"text-yellow-400":"text-gray-300"])},"★",2)),64)),e[8]||(e[8]=s("span",{class:"ml-1 text-sm text-gray-600"},"& up",-1))])])),64))])]),s("div",{class:"flex gap-2"},[s("div",{class:"flex justify-center w-full"},[s("button",{onClick:N,class:"px-4 py-2 border rounded hover:bg-gray-50"}," Reset ")])])]),s("div",he,[s("div",xe,[s("div",ye,[s("div",ke,[E(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>d.value=t),onInput:H,onFocus:e[3]||(e[3]=t=>y.value=d.value.length>0),onBlur:G,class:"w-full pl-10 pr-4 py-2 border rounded-lg",placeholder:"Search skills or keywords...",autocomplete:"off"},null,544),[[le,d.value]]),e[11]||(e[11]=s("svg",{class:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),y.value&&S.value.length>0?(a(),n("div",_e,[(a(!0),n(i,null,u(S.value,(t,o)=>(a(),n("div",{key:o,onMousedown:m=>I(t),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},r(t),41,be))),128))])):j("",!0)])])]),s("div",we,[(a(!0),n(i,null,u(J.value,t=>(a(),n("div",{key:t.id,class:"bg-white rounded-lg border p-6 flex flex-col h-[400px]"},[s("div",Ce,[s("div",Se,[t.profile_photo?(a(),n("img",{key:1,src:t.profile_photo,alt:"Profile Photo",class:"w-full h-full object-cover rounded-full"},null,8,Me)):(a(),n("span",Le,r(Q(t.name)),1))]),s("div",null,[s("div",je,[s("h3",Te,r(t.name),1),s("div",Ue,[e[12]||(e[12]=s("span",{class:"text-yellow-400 text-sm"},"★",-1)),s("span",$e,r(t.rating?t.rating.toFixed(1):"N/A"),1),t.rating?(a(),n("span",Be,"("+r(t.total_ratings)+")",1)):j("",!0)])]),s("p",Fe,r(t.location||"Location not set"),1)])]),s("div",Ee,[s("div",Pe,[e[13]||(e[13]=s("h4",{class:"text-sm font-medium text-gray-700"},"Skills I Can Teach",-1)),s("div",De,[p(t.teaching_skills).length<=2?(a(!0),n(i,{key:0},u(p(t.teaching_skills),o=>(a(),n("span",{key:o,class:"bg-gray-900 text-white px-3 py-1 rounded-full text-xs font-medium"},r(o),1))),128)):(a(),n(i,{key:1},[(a(!0),n(i,null,u(p(t.teaching_skills).slice(0,2),o=>(a(),n("span",{key:o,class:"bg-gray-900 text-white px-3 py-1 rounded-full text-xs font-medium"},r(o),1))),128)),s("div",Oe,[s("button",{onClick:o=>Y(t.id),class:"bg-gray-900 text-white px-3 py-1 rounded-full text-xs font-medium cursor-pointer"}," +"+r(p(t.teaching_skills).length-2),9,Re),h.value[t.id]?(a(),n("div",Ve,[(a(!0),n(i,null,u(p(t.teaching_skills).slice(2),o=>(a(),n("span",{key:o,class:"block px-4 py-2 text-sm text-gray-700"},r(o),1))),128))])):j("",!0)])],64))])]),s("div",ze,[(a(!0),n(i,null,u(t.teaching_skills,o=>(a(),n("span",{key:o.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},r(o.name),1))),128))])]),s("div",Ae,[s("div",We,[e[14]||(e[14]=s("h4",{class:"text-sm font-medium text-gray-700"},"Skills I Want to Learn",-1)),s("div",qe,[p(t.learning_skills).length<=2?(a(!0),n(i,{key:0},u(p(t.learning_skills),o=>(a(),n("span",{key:o,class:"bg-gray-700 text-white px-3 py-1 rounded-full text-xs font-medium"},r(o),1))),128)):(a(),n(i,{key:1},[(a(!0),n(i,null,u(p(t.learning_skills).slice(0,2),o=>(a(),n("span",{key:o,class:"bg-gray-700 text-white px-3 py-1 rounded-full text-xs font-medium"},r(o),1))),128)),s("div",Ne,[s("button",{onClick:o=>Z(t.id),class:"bg-gray-700 text-white px-3 py-1 rounded-full text-xs font-medium cursor-pointer"}," +"+r(p(t.learning_skills).length-2),9,He),x.value[t.id]?(a(),n("div",Ie,[(a(!0),n(i,null,u(p(t.learning_skills).slice(2),o=>(a(),n("span",{key:o,class:"block px-4 py-2 text-sm text-gray-700"},r(o),1))),128))])):j("",!0)])],64))])]),s("div",Ge,[(a(!0),n(i,null,u(t.learning_skills,o=>(a(),n("span",{key:o.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},r(o.name),1))),128))])]),s("div",Je,[s("div",Ke," Member since "+r(X(t.created_at)),1),s("button",{onClick:o=>K(t),class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-md hover:bg-gray-800"}," Request Swap ",8,Qe)])]))),128))]),s("div",Xe,[s("button",{class:"p-2 border rounded hover:bg-gray-50 disabled:opacity-50",disabled:f.value===1,onClick:e[4]||(e[4]=t=>f.value--)},e[15]||(e[15]=[s("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,Ye),(a(!0),n(i,null,u(V.value,t=>(a(),n("button",{key:t,onClick:o=>f.value=t,class:A(["px-3 py-1 border rounded hover:bg-gray-50",f.value===t?"bg-black text-white":""])},r(t),11,Ze))),128)),s("button",{class:"p-2 border rounded hover:bg-gray-50 disabled:opacity-50",disabled:f.value===V.value,onClick:e[5]||(e[5]=t=>f.value++)},e[16]||(e[16]=[s("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,et)])])])])]),k(ne,{show:B.value,user:D.auth.user,recipient:O.value,onClose:e[6]||(e[6]=t=>B.value=!1)},null,8,["show","user","recipient"]),s("footer",tt,[s("div",st,[e[23]||(e[23]=s("div",null," 2025 SkillSwap. All rights reserved.",-1)),s("div",lt,[k(U($),{href:l.route("about"),class:"hover:underline"},{default:T(()=>e[19]||(e[19]=[w("About")])),_:1},8,["href"]),k(U($),{href:l.route("terms"),class:"hover:underline"},{default:T(()=>e[20]||(e[20]=[w("Terms")])),_:1},8,["href"]),k(U($),{href:l.route("privacy"),class:"hover:underline"},{default:T(()=>e[21]||(e[21]=[w("Privacy")])),_:1},8,["href"]),k(U($),{href:l.route("contact"),class:"hover:underline"},{default:T(()=>e[22]||(e[22]=[w("Contact")])),_:1},8,["href"])])])])],64))}};export{it as default};
