import{m as r,q as z,y as A,z as D,c as a,o as i,a as x,d as e,u as v,g as W,w as _,e as b,S as w,F as d,A as c,k as m,l as k,v as $,t as u,B as G,i as U}from"./app-RABvWGqE.js";const H={class:"min-h-screen bg-gray-50"},J={class:"bg-white border-b border-gray-200"},K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Q={class:"flex justify-between h-16"},X={class:"flex"},Y={class:"flex-shrink-0 flex items-center"},Z={class:"hidden sm:ml-6 sm:flex sm:space-x-8"},ee={class:"hidden sm:ml-6 sm:flex sm:items-center"},se={class:"flex items-center space-x-4"},te={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},le={class:"flex gap-8"},oe={class:"w-64 flex-shrink-0"},ae={class:"bg-white p-6 rounded-lg shadow"},ie={class:"mb-6"},ne={class:"space-y-2"},re=["value"],de={class:"ml-2 text-sm text-gray-600"},ce={class:"mb-6"},ue={class:"space-y-2"},ge=["value"],pe={class:"ml-2 text-sm text-gray-600 flex items-center"},me={class:"flex"},fe={class:"mb-6"},xe={class:"space-y-2"},ve={class:"flex items-center"},ye={class:"flex items-center"},he={class:"flex items-center"},_e={class:"flex-1"},be={class:"mb-6"},we={class:"relative"},ke={class:"grid grid-cols-1 gap-6"},Se={class:"flex items-start justify-between"},Ce={class:"flex items-center"},Le={class:"w-12 h-12 rounded-full overflow-hidden mr-4"},Me={class:"w-full h-full bg-gray-100 flex items-center justify-center"},Fe=["src","alt","onError"],Re={key:1,class:"text-gray-500 text-sm"},Ue={class:"font-medium"},Be={class:"text-sm text-gray-500"},Ee={class:"flex items-center"},Pe={class:"flex text-yellow-400"},Ve={class:"mt-4"},je={class:"mt-2 flex flex-wrap gap-2"},qe={key:0,class:"text-sm text-gray-500"},Ne={class:"mt-4"},Ie={class:"mt-2 flex flex-wrap gap-2"},Oe={key:0,class:"text-sm text-gray-500"},Te={class:"mt-6 flex justify-between items-center"},ze={class:"text-sm text-gray-500"},Ae=["onClick"],De={class:"mt-6 flex justify-center items-center gap-2"},We=["disabled"],$e={class:"px-4 py-2 text-sm font-medium text-gray-700"},Je={__name:"BrowseSkills",props:{skills:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},initialSearch:{type:String,default:""},initialCategory:{type:String,default:""},pagination:{type:Object,default:()=>({})},auth:{type:Object,required:!0}},setup(Ge){r("");const g=r([]);r([]),r(!1);const B=r(new Set),y=r(!1),h=r(!1),p=r(1),S=r(null),E=["Design","Development","Music","Language","Business","Marketing","Photography","Writing"],P=[{value:4,label:"4 stars"},{value:3,label:"3 stars"},{value:2,label:"2 stars"}],V=l=>l?l.split(" ").map(s=>s[0]).join("").toUpperCase():"",j=()=>{g.value=[],selectedRating.value=null,lookingForMySkills.value=!1,y.value=!1,h.value=!1,search.value="",f()},f=()=>{console.log("Applying filters with search:",search.value),window.Inertia.get("/browse",{search:search.value,categories:g.value,rating:selectedRating.value,lookingForMySkills:lookingForMySkills.value,offeringSkillsIWant:y.value,perfectMatchesOnly:h.value,page:p.value},{preserveState:!0,preserveScroll:!0})},q=l=>{var M,F,R;const s=props.auth.user,t=props.skills.find(L=>L.id===l);if(!t)return;const o=prompt("Enter your message for the swap request:");if(!o)return;const C=((M=t.teaching_skills[0])==null?void 0:M.name)||"a skill",n=((R=(F=s.teaching_skills)==null?void 0:F[0])==null?void 0:R.name)||"a skill";window.Inertia.post(route("requests.store"),{recipient_id:l,skill_wanted:C,skill_offered:n,message:o,availability:"Flexible",duration:60},{preserveScroll:!0,onSuccess:()=>{alert("Request sent successfully!")},onError:L=>{console.error("Error sending request:",L),alert("Failed to send request. Please try again.")}})},N=()=>{p.value>1&&(p.value--,f())},I=()=>{p.value++,f()},O=l=>{console.log("Image error for user:",l),B.value.add(l)},T=z(()=>{console.log("FILTERED USERS RUNNING"),console.log("Props skills:",props.skills),props.skills.length>0&&console.log("First user photo URL:",props.skills[0].profile_photo_url);let l=[...props.skills];if(console.log("First user:",l[0]),search.value){const s=search.value.toLowerCase();l=l.filter(t=>{const o=t.teaching_skills.some(n=>n.name.toLowerCase().includes(s)||n.description&&n.description.toLowerCase().includes(s)||n.category&&n.category.toLowerCase().includes(s)),C=t.learning_skills.some(n=>n.name.toLowerCase().includes(s)||n.description&&n.description.toLowerCase().includes(s)||n.category&&n.category.toLowerCase().includes(s));return o||C})}return g.value.length>0&&(l=l.filter(s=>[...s.teaching_skills,...s.learning_skills].some(o=>g.value.includes(o.category)))),selectedRating.value&&(l=l.filter(s=>(s.rating||0)>=selectedRating.value)),l});return A(search,l=>{S.value&&clearTimeout(S.value),S.value=setTimeout(()=>{f()},300)}),D(()=>{console.log("Users:",props.skills);const l=new URLSearchParams(window.location.search);search.value=l.get("search")||props.initialSearch||"",g.value=l.get("category")?[l.get("category")]:l.get("categories")?l.get("categories").split(","):props.initialCategory?[props.initialCategory]:[]}),(l,s)=>(i(),a(d,null,[x(v(W),{title:"Browse Skills"}),e("div",H,[e("nav",J,[e("div",K,[e("div",Q,[e("div",X,[e("div",Y,[x(v(w),{href:"/",class:"text-xl font-bold"},{default:_(()=>s[6]||(s[6]=[b("SkillSwap")])),_:1})]),e("div",Z,[x(v(w),{href:"/browse",class:"border-indigo-500 text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"},{default:_(()=>s[7]||(s[7]=[b(" Browse Skills ")])),_:1})])]),e("div",ee,[e("div",se,[x(v(w),{href:"/profile",class:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium"},{default:_(()=>s[8]||(s[8]=[b(" My Profile ")])),_:1}),x(v(w),{href:"/logout",method:"post",as:"button",class:"bg-gray-800 text-white px-3 py-1.5 rounded-md text-sm font-medium"},{default:_(()=>s[9]||(s[9]=[b(" Log out ")])),_:1})])])])])]),e("div",te,[s[24]||(s[24]=e("h1",{class:"text-2xl font-bold mb-2"},"Browse Skills",-1)),s[25]||(s[25]=e("p",{class:"text-gray-600 mb-8"},"Find skills to learn or people to teach",-1)),e("div",le,[e("div",oe,[e("div",ae,[s[17]||(s[17]=e("h2",{class:"font-semibold mb-4"},"Filters",-1)),e("div",ie,[s[10]||(s[10]=e("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Skill Categories",-1)),e("div",ne,[(i(),a(d,null,c(E,t=>e("label",{key:t,class:"flex items-center"},[m(e("input",{type:"checkbox",value:t,"onUpdate:modelValue":s[0]||(s[0]=o=>g.value=o),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,re),[[k,g.value]]),e("span",de,u(t),1)])),64))])]),e("div",ce,[s[12]||(s[12]=e("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Rating",-1)),e("div",ue,[(i(),a(d,null,c(P,t=>e("label",{key:t.value,class:"flex items-center"},[m(e("input",{type:"radio",value:t.value,"onUpdate:modelValue":s[1]||(s[1]=o=>l.selectedRating=o),name:"rating",class:"border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,ge),[[G,l.selectedRating]]),e("span",pe,[e("span",me,[(i(!0),a(d,null,c(t.value,o=>(i(),a("span",{key:o,class:"text-yellow-400"},"★"))),128)),(i(!0),a(d,null,c(5-t.value,o=>(i(),a("span",{key:o+5,class:"text-gray-300"},"★"))),128))]),s[11]||(s[11]=e("span",{class:"ml-1"},"& up",-1))])])),64))])]),e("div",fe,[s[16]||(s[16]=e("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Exchange Preferences",-1)),e("div",xe,[e("label",ve,[m(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=t=>l.lookingForMySkills=t),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[k,l.lookingForMySkills]]),s[13]||(s[13]=e("span",{class:"ml-2 text-sm text-gray-600"},"Looking for my skills",-1))]),e("label",ye,[m(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=t=>y.value=t),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[k,y.value]]),s[14]||(s[14]=e("span",{class:"ml-2 text-sm text-gray-600"},"Offering skills I want",-1))]),e("label",he,[m(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=t=>h.value=t),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[k,h.value]]),s[15]||(s[15]=e("span",{class:"ml-2 text-sm text-gray-600"},"Perfect matches only",-1))])])]),e("div",{class:"flex gap-2"},[e("button",{onClick:j,class:"text-sm text-gray-600 hover:text-gray-900"}," Reset "),e("button",{onClick:f,class:"flex-1 bg-gray-900 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-800"}," Apply Filters ")])])]),e("div",_e,[e("div",be,[e("div",we,[m(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>l.search=t),type:"text",placeholder:"Search skills or keywords...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-gray-500 focus:border-gray-500"},null,512),[[$,l.search]]),s[18]||(s[18]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])]),e("div",ke,[(i(!0),a(d,null,c(T.value,t=>(i(),a("div",{key:t.id,class:"bg-white p-6 rounded-lg shadow"},[e("div",Se,[e("div",Ce,[e("div",Le,[e("div",Me,[t.profile_photo_url?(i(),a("img",{key:0,src:t.profile_photo_url,alt:t.name,class:"w-full h-full object-cover",onError:o=>O(t.id)},null,40,Fe)):(i(),a("span",Re,u(V(t.name)),1))])]),e("div",null,[e("h3",Ue,u(t.name),1),e("p",Be,u(t.location||"Location not specified"),1)])]),e("div",Ee,[e("div",Pe,[(i(),a(d,null,c(5,o=>e("span",{key:o,class:"text-lg"},"★")),64))]),s[19]||(s[19]=e("span",{class:"ml-1 text-gray-600"},"5",-1))])]),e("div",Ve,[s[20]||(s[20]=e("h4",{class:"text-sm font-medium text-gray-700"},"Looking to learn:",-1)),e("div",je,[(i(!0),a(d,null,c(t.learning_skills,o=>(i(),a("span",{key:o.id,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800"},u(o.name),1))),128)),t.learning_skills.length===0?(i(),a("span",qe," No learning skills listed ")):U("",!0)])]),e("div",Ne,[s[21]||(s[21]=e("h4",{class:"text-sm font-medium text-gray-700"},"Can teach:",-1)),e("div",Ie,[(i(!0),a(d,null,c(t.teaching_skills,o=>(i(),a("span",{key:o.id,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800"},u(o.name),1))),128)),t.teaching_skills.length===0?(i(),a("span",Oe," No teaching skills listed ")):U("",!0)])]),e("div",Te,[e("div",ze,u(t.swaps_completed||0)+" swaps completed ",1),e("button",{onClick:o=>q(t.id),class:"bg-gray-900 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-800"}," Request Swap ",8,Ae)])]))),128))]),e("div",De,[e("button",{onClick:N,disabled:p.value===1,class:"p-2 rounded-md hover:bg-gray-100 disabled:opacity-50"},s[22]||(s[22]=[e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,We),e("span",$e,u(p.value),1),e("button",{onClick:I,class:"p-2 rounded-md hover:bg-gray-100"},s[23]||(s[23]=[e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]))])])])])])],64))}};export{Je as default};
